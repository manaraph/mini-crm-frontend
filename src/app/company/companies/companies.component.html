<div class="container py-5"> 
  <div class="my-1 d-flex">
    <h2>Registered Companies</h2>
    <div class="ml-auto h-100 my-auto">
      <button class="btn btn-custom" data-toggle="modal" data-target="#addCompanyModal"><i class="mr-2 fa fa-plus"></i> Add Company</button>
    </div>
  </div>
  <div class="py-3">
    <table class="table table-striped table-bordered">
      <thead class="thead-light">
        <tr>
          <th scope="col">#</th>
          <th scope="col">Organization</th>
          <th scope="col">Email</th>
          <th scope="col">Website</th>
          <th scope="col" class="text-center">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let organization of organizations; let i = index;">
          <th scope="row">{{i+1}}</th>
          <td>{{ organization.name }}</td>
          <td>{{ organization.email }}</td>
          <td>{{ organization.website }}</td>
          <td>
            <button class="mx-2 btn btn-view" (click)="viewEmployees(organization.id)" title="View Employees">
              <i class="fas fa-eye"></i>
            </button>
            <button class="mx-2 btn btn-primary" title="Edit Company" (click)="organizationId = organization.id" data-toggle="modal" data-target="#editCompanyModal">
              <i class="fas fa-edit"></i>
            </button>
            <button class="mx-2 btn btn-danger" (click)="deleteCompany(organization)" title="Delete Company">
              <i class="fas fa-trash"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="addCompanyModal" tabindex="-1" role="dialog" aria-labelledby="addCompanyModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addCompanyModalLabel">Add Company</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form class="form-signin" (ngSubmit)="addCompany()" [formGroup]="companyForm">
        <div class="modal-body">
          <div class="input-group form-group">
            <div class="input-group-prepend">
              <span class="input-group-text"><i class="fa fa-building"></i></span>
            </div>
            <input type="text" class="form-control" placeholder="Company Name" formControlName="name">
          </div>
          <div class="input-group form-group">
            <div class="input-group-prepend">
              <span class="input-group-text"><i class="fa fa-envelope"></i></span>
            </div>
            <input type="email" class="form-control" placeholder="Email" formControlName="email">
          </div>
          <div class="input-group form-group">
            <div class="input-group-prepend">
              <span class="input-group-text"><i class="fa fa-globe"></i></span>
            </div>
            <input type="text" class="form-control" placeholder="website" formControlName="website">
          </div>
          <div class="text-center my-2" [ngClass]="successful ? 'text-sucess': 'text-danger'"><strong>{{ message }}</strong></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-custom" [disabled]="!companyForm.valid">Add Company</button>
        </div>
      </form>
    </div>
  </div>
</div>


<!-- Modal -->
<div class="modal fade" id="editCompanyModal" tabindex="-1" role="dialog" aria-labelledby="editCompanyModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="editCompanyModalLabel">Edit Company</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form class="form-signin" (ngSubmit)="editCompany()" [formGroup]="companyForm">
        <div class="modal-body">
          <div class="input-group form-group">
            <div class="input-group-prepend">
              <span class="input-group-text"><i class="fa fa-building"></i></span>
            </div>
            <input type="text" class="form-control" placeholder="Company Name" formControlName="name">
          </div>
          <div class="input-group form-group">
            <div class="input-group-prepend">
              <span class="input-group-text"><i class="fa fa-envelope"></i></span>
            </div>
            <input type="email" class="form-control" placeholder="Email" formControlName="email">
          </div>
          <div class="input-group form-group">
            <div class="input-group-prepend">
              <span class="input-group-text"><i class="fa fa-globe"></i></span>
            </div>
            <input type="text" class="form-control" placeholder="website" formControlName="website">
          </div>
          <div class="text-center my-2" [ngClass]="successful ? 'text-sucess': 'text-danger'"><strong>{{ message }}</strong></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-custom" [disabled]="!companyForm.valid">Update Company</button>
        </div>
      </form>
    </div>
  </div>
</div>